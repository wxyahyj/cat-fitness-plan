<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ğŸ± çŒ«çŒ«å¥èº«æ‰“å¡è®¡åˆ’ V4.1</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background-color: #f4f0ff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background-color: #c8a2c8;
      padding: 20px;
      text-align: center;
      color: white;
    }
    header h1 {
      margin: 0;
      font-size: 2.2em;
    }
    main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    #å·¦æ , #å³æ  {
      width: 300px;
      background-color: #e5dcf7;
      padding: 20px;
      overflow-y: auto;
      box-shadow: 2px 0 8px rgba(0,0,0,0.1);
    }
    #å³æ  {
      box-shadow: -2px 0 8px rgba(0,0,0,0.1);
    }
    #ä¸»å†…å®¹ {
      flex: 1;
      padding: 40px;
      overflow-y: auto;
      background: #fff;
    }
    h2 {
      color: #6a0dad;
      margin-top: 0;
    }
    button {
      background: #9966cc;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #7d5bb1;
    }
    table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
      background-color: #f8f3ff;
    }
    .card {
      background: #faf4ff;
      border: 1px solid #dac0ff;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    .ä»Šæ—¥å¡ç‰‡ {
      border: 2px dashed #ff69b4;
      box-shadow: 0 0 12px #ffc0cb;
    }
    .day-title {
      font-weight: bold;
      font-size: 1.2em;
      margin-bottom: 8px;
      color: #8a2be2;
    }
    #è¥å…»æ¨èæ  {
      background: linear-gradient(to bottom right, #d4c3f0, #f0e8ff);
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 0 8px rgba(128, 85, 200, 0.2);
    }
    .nutri-card {
      background: #fffaf0;
      border: 1px solid #e0c0ff;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 10px;
    }
    .nutri-card ul {
      padding-left: 20px;
      margin: 8px 0 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>çŒ«çŒ«å¥èº«æ‰“å¡è®¡åˆ’</h1>
    <p>è½»æ¾å¡‘å½¢ï¼Œæ¯å¤©ä¸€ç‚¹ç‚¹ï¼Œå–µï¼ğŸ’ª</p>
  </header>

  <main>
    <div id="å·¦æ ">
      <section>
        <h2>âœ… ä»Šæ—¥æ‰“å¡</h2>
        <button onclick="æ‰“å¡()">æˆ‘æ‰“å¡å•¦ï¼</button>
        <div id="æ‰“å¡çŠ¶æ€">å°šæœªæ‰“å¡</div>
        <table id="æ‰“å¡è®°å½•">
          <tr><th>æ—¥æœŸ</th><th>çŠ¶æ€</th></tr>
        </table>
      </section>
      <section>
        <h2>ğŸ† æˆ‘çš„çŒ«çŒ«æ‰“å¡å¾½ç« </h2>
        <div id="å¾½ç« å±•ç¤º">
          <div class="å‹‹ç« ">ğŸŸ</div>
          <div class="å‹‹ç« ">ğŸ±</div>
          <div class="å‹‹ç« ">ğŸ•</div>
        </div>
      </section>
      <section>
        <h2>ğŸ¾ é¼“åŠ±è¯­ & å¿ƒæƒ…è®°å½•</h2>
        <p id="é¼“åŠ±è¯­">ä½ å·²ç»å¾ˆæ£’äº†ï¼Œç»§ç»­åŠ æ²¹å–µï¼ğŸ˜¸</p>
        <textarea placeholder="ä»Šå¤©çš„å¿ƒæƒ…è®°å½•..."></textarea>
      </section>
    </div>

    <div id="ä¸»å†…å®¹">
      <h2>ğŸ§˜â€â™€ï¸ ä¸€å‘¨è®­ç»ƒå¡ç‰‡</h2>
      <div id="è®­ç»ƒå†…å®¹"></div>
    </div>

    <div id="å³æ ">
      <section id="è¥å…»æ¨èæ ">
        <h2>ğŸ½ï¸ ä¸€å‘¨è¥å…»å»ºè®®</h2>
        <label>
          <input type="checkbox" id="æœ‰åœŸè±†å¼€å…³">
          ä»Šæ—¥æœ‰åœŸè±† ğŸ¥”
        </label>
        <div id="å‘¨è¥å…»å»ºè®®"></div>
      </section>
    </div>
  </main>

  <script>
    // â€”â€”â€”â€” æ‰“å¡åŠŸèƒ½ â€”â€”â€”â€”
    function æ‰“å¡() {
      const ä»Šå¤© = new Date().toISOString().slice(0,10);
      const è®°å½• = JSON.parse(localStorage.getItem("æ‰“å¡è®°å½•")) || [];
      if (!è®°å½•.some(i => i.æ—¥æœŸ === ä»Šå¤©)) {
        è®°å½•.push({ æ—¥æœŸ: ä»Šå¤©, çŠ¶æ€: "å·²å®Œæˆ âœ…" });
        localStorage.setItem("æ‰“å¡è®°å½•", JSON.stringify(è®°å½•));
        æ›´æ–°æ‰“å¡è¡¨(è®°å½•);
        document.getElementById("æ‰“å¡çŠ¶æ€").textContent = "ä»Šå¤©å·²ç»æ‰“å¡å–µï¼ ğŸ‰";
      } else {
        alert("ä»Šå¤©å·²ç»æ‰“è¿‡å¡äº†å–µï½");
      }
    }
    function æ›´æ–°æ‰“å¡è¡¨(è®°å½•) {
      const è¡¨ = document.getElementById("æ‰“å¡è®°å½•");
      è¡¨.innerHTML = "<tr><th>æ—¥æœŸ</th><th>çŠ¶æ€</th></tr>";
      è®°å½•.forEach(item => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${item.æ—¥æœŸ}</td><td>${item.çŠ¶æ€}</td>`;
        è¡¨.appendChild(tr);
      });
    }

    // â€”â€”â€”â€” è®­ç»ƒå¡ç‰‡ â€”â€”â€”â€”
    const æ˜ŸæœŸ = ["æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­","æ˜ŸæœŸæ—¥"];
    const åŠ¨ä½œè®¡åˆ’ = {
      0: ["ä»°å§å·è…¹ï¼ˆ15Ã—2ï¼‰","æ­»è™«å¼ï¼ˆå·¦å³20ï¼‰","ä»°å§æŠ¬è…¿ï¼ˆ15Ã—2ï¼‰","å¹³æ¿æ”¯æ’‘ï¼ˆ30sÃ—2ï¼‰"],
      1: ["åŸåœ°è¸æ­¥ï¼ˆ3åˆ†é’Ÿï¼‰","å¼€åˆè·³ï¼ˆ20Ã—2ï¼‰","é«˜æŠ¬è…¿ï¼ˆ30sÃ—2ï¼‰","ä½“ä¾§ä¼¸å±•ï¼ˆ30sÃ—2ï¼‰"],
      2: ["ä¿¯å§æ’‘ï¼ˆè†ç‰ˆ10Ã—2ï¼‰","åæ‘†è‡‚ï¼ˆ20ï¼‰","æ‰‹è‡‚ç”»åœˆï¼ˆå‰å20ï¼‰","çŒ«å¼ä¼¸å±•ï¼ˆ30sï¼‰"],
      3: ["ä¸‹çŠ¬å¼ï¼ˆ30sï¼‰","æˆ˜å£«ä¸€å¼ï¼ˆ30sÃ—2ï¼‰","åå§¿å‰å±ˆï¼ˆ30sï¼‰","å†¥æƒ³å‘¼å¸ï¼ˆ5åˆ†é’Ÿï¼‰"],
      4: ["è·³èˆ/æ•£æ­¥/éª‘è½¦ï¼Œéšå¿ƒåŠ¨ä¸€åŠ¨ ğŸ¾"],
      5: ["ç«™ç«‹å‰å±ˆï¼ˆ30sï¼‰","è´è¶å¼ï¼ˆ30sï¼‰","ä»°å§æ‰­è½¬ï¼ˆ30sÃ—2ï¼‰","å†¥æƒ³å‘¼å¸ï¼ˆ5åˆ†é’Ÿï¼‰"],
      6: ["æ·±è¹²ï¼ˆ15Ã—2ï¼‰","è‡€æ¡¥ï¼ˆ20Ã—2ï¼‰","é™æ€å¼“æ­¥ï¼ˆ30sÃ—2ï¼‰","çŒ«å¼ä¼¸å±•ï¼ˆ30sï¼‰"]
    };
    function å¡«å……è®­ç»ƒå¡ç‰‡() {
      const å®¹ = document.getElementById("è®­ç»ƒå†…å®¹");
      const idx = (new Date().getDay() + 6) % 7;
      å®¹.innerHTML = "";
      for (let i=0; i<7; i++) {
        const c = document.createElement("div");
        c.className = "card" + (i===idx ? " ä»Šæ—¥å¡ç‰‡" : "");
        const t = document.createElement("div");
        t.className = "day-title";
        t.textContent = æ˜ŸæœŸ[i];
        c.appendChild(t);
        const ul = document.createElement("ul");
        åŠ¨ä½œè®¡åˆ’[i].forEach(txt => {
          const li = document.createElement("li");
          li.textContent = txt;
          ul.appendChild(li);
        });
        c.appendChild(ul);
        å®¹.appendChild(c);
      }
    }

    // â€”â€”â€”â€” ä¸€å‘¨è¥å…»å»ºè®® â€”â€”â€”â€”
    const ç¢³æ—¥åº = ["é«˜ç¢³","ä½ç¢³","ä¸­ç¢³","é«˜ç¢³","ä½ç¢³","ä¸­ç¢³","çµæ´»"];
    const è¥å…»é…ç½® = {
      é«˜ç¢³: {
        æ—©é¤: txt=>"é¸¡è›‹ 2é¢—",
        åˆé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­150g+åœŸè±†50g+é¸¡èƒ¸120g" : "ç±³é¥­150g+é¸¡èƒ¸120g",
        æ™šé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­100g+åœŸè±†50g+è›‹ç™½ç²‰25g" : "ç±³é¥­100g+è›‹ç™½ç²‰25g"
      },
      ä¸­ç¢³: {
        æ—©é¤: txt=>"é¸¡è›‹ 1é¢—",
        åˆé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­100g+åœŸè±†50g+é¸¡èƒ¸100g" : "ç±³é¥­100g+é¸¡èƒ¸100g",
        æ™šé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­80g+åœŸè±†50g+è›‹ç™½ç²‰25g" : "ç±³é¥­80g+è›‹ç™½ç²‰25g"
      },
      ä½ç¢³: {
        æ—©é¤: txt=>"é¸¡è›‹ 1é¢—",
        åˆé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­80g+åœŸè±†50g+é¸¡èƒ¸100g" : "ç±³é¥­80g+é¸¡èƒ¸100g",
        æ™šé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­60g+åœŸè±†50g+è›‹ç™½ç²‰30g" : "ç±³é¥­60g+è›‹ç™½ç²‰30g"
      },
      çµæ´»: {
        æ—©é¤: txt=>"é¸¡è›‹ 1~2é¢—",
        åˆé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­100g+åœŸè±†50g+é¸¡èƒ¸120g" : "ç±³é¥­100g+é¸¡èƒ¸120g",
        æ™šé¤: æœ‰åœŸè±†=> æœ‰åœŸè±† ? "ç±³é¥­80g+åœŸè±†50g+è›‹ç™½ç²‰25g" : "ç±³é¥­80g+è›‹ç™½ç²‰25g"
      }
    };

    function ç”Ÿæˆå‘¨è¥å…»å»ºè®®() {
      const å®¹ = document.getElementById("å‘¨è¥å…»å»ºè®®");
      å®¹.innerHTML = "";
      const hasPotato = document.getElementById("æœ‰åœŸè±†å¼€å…³").checked;

      for (let i = 0; i < 7; i++) {
        const dayType = ç¢³æ—¥åº[i];
        const card = document.createElement("div");
        card.className = "nutri-card";

        const title = document.createElement("div");
        title.className = "day-title";
        title.textContent = `${æ˜ŸæœŸ[i]} â€” ${dayType}æ—¥`;
        card.appendChild(title);

        const ul = document.createElement("ul");
        const cfg = è¥å…»é…ç½®[dayType];
        Object.entries(cfg).forEach(([meal, fn]) => {
          const txt = fn(hasPotato);
          const li = document.createElement("li");
          li.textContent = `${meal}ï¼š${txt}`;
          ul.appendChild(li);
        });
        card.appendChild(ul);
        å®¹.appendChild(card);
      }
    }

    // â€”â€”â€”â€” é¡µé¢åˆå§‹åŒ– â€”â€”â€”â€”
    function åˆå§‹åŒ–() {
      const rec = JSON.parse(localStorage.getItem("æ‰“å¡è®°å½•")) || [];
      æ›´æ–°æ‰“å¡è¡¨(rec);
      å¡«å……è®­ç»ƒå¡ç‰‡();
      const today = new Date().toISOString().slice(0,10);
      if (rec.some(i=>i.æ—¥æœŸ===today)) {
        document.getElementById("æ‰“å¡çŠ¶æ€").textContent = "ä»Šå¤©å·²ç»æ‰“å¡å–µï¼ ğŸ‰";
      }
      ç”Ÿæˆå‘¨è¥å…»å»ºè®®();
      document.getElementById("æœ‰åœŸè±†å¼€å…³")
              .addEventListener("change", ç”Ÿæˆå‘¨è¥å…»å»ºè®®);
    }
    window.onload = åˆå§‹åŒ–;
  </script>
</body>
</html>
