<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>🐱 猫猫健身打卡计划 V4.1</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background-color: #f4f0ff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background-color: #c8a2c8;
      padding: 20px;
      text-align: center;
      color: white;
    }
    header h1 {
      margin: 0;
      font-size: 2.2em;
    }
    main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    #左栏, #右栏 {
      width: 300px;
      background-color: #e5dcf7;
      padding: 20px;
      overflow-y: auto;
      box-shadow: 2px 0 8px rgba(0,0,0,0.1);
    }
    #右栏 {
      box-shadow: -2px 0 8px rgba(0,0,0,0.1);
    }
    #主内容 {
      flex: 1;
      padding: 40px;
      overflow-y: auto;
      background: #fff;
    }
    h2 {
      color: #6a0dad;
      margin-top: 0;
    }
    button {
      background: #9966cc;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #7d5bb1;
    }
    table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
      background-color: #f8f3ff;
    }
    .card {
      background: #faf4ff;
      border: 1px solid #dac0ff;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    .今日卡片 {
      border: 2px dashed #ff69b4;
      box-shadow: 0 0 12px #ffc0cb;
    }
    .day-title {
      font-weight: bold;
      font-size: 1.2em;
      margin-bottom: 8px;
      color: #8a2be2;
    }
    #营养推荐栏 {
      background: linear-gradient(to bottom right, #d4c3f0, #f0e8ff);
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 0 8px rgba(128, 85, 200, 0.2);
    }
    .nutri-card {
      background: #fffaf0;
      border: 1px solid #e0c0ff;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 10px;
    }
    .nutri-card ul {
      padding-left: 20px;
      margin: 8px 0 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>猫猫健身打卡计划</h1>
    <p>轻松塑形，每天一点点，喵！💪</p>
  </header>

  <main>
    <div id="左栏">
      <section>
        <h2>✅ 今日打卡</h2>
        <button onclick="打卡()">我打卡啦！</button>
        <div id="打卡状态">尚未打卡</div>
        <table id="打卡记录">
          <tr><th>日期</th><th>状态</th></tr>
        </table>
      </section>
      <section>
        <h2>🏆 我的猫猫打卡徽章</h2>
        <div id="徽章展示">
          <div class="勋章">🐟</div>
          <div class="勋章">🐱</div>
          <div class="勋章">🐕</div>
        </div>
      </section>
      <section>
        <h2>🐾 鼓励语 & 心情记录</h2>
        <p id="鼓励语">你已经很棒了，继续加油喵！😸</p>
        <textarea placeholder="今天的心情记录..."></textarea>
      </section>
    </div>

    <div id="主内容">
      <h2>🧘‍♀️ 一周训练卡片</h2>
      <div id="训练内容"></div>
    </div>

    <div id="右栏">
      <section id="营养推荐栏">
        <h2>🍽️ 一周营养建议</h2>
        <label>
          <input type="checkbox" id="有土豆开关">
          今日有土豆 🥔
        </label>
        <div id="周营养建议"></div>
      </section>
    </div>
  </main>

  <script>
    // ———— 打卡功能 ————
    function 打卡() {
      const 今天 = new Date().toISOString().slice(0,10);
      const 记录 = JSON.parse(localStorage.getItem("打卡记录")) || [];
      if (!记录.some(i => i.日期 === 今天)) {
        记录.push({ 日期: 今天, 状态: "已完成 ✅" });
        localStorage.setItem("打卡记录", JSON.stringify(记录));
        更新打卡表(记录);
        document.getElementById("打卡状态").textContent = "今天已经打卡喵！ 🎉";
      } else {
        alert("今天已经打过卡了喵～");
      }
    }
    function 更新打卡表(记录) {
      const 表 = document.getElementById("打卡记录");
      表.innerHTML = "<tr><th>日期</th><th>状态</th></tr>";
      记录.forEach(item => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${item.日期}</td><td>${item.状态}</td>`;
        表.appendChild(tr);
      });
    }

    // ———— 训练卡片 ————
    const 星期 = ["星期一","星期二","星期三","星期四","星期五","星期六","星期日"];
    const 动作计划 = {
      0: ["仰卧卷腹（15×2）","死虫式（左右20）","仰卧抬腿（15×2）","平板支撑（30s×2）"],
      1: ["原地踏步（3分钟）","开合跳（20×2）","高抬腿（30s×2）","体侧伸展（30s×2）"],
      2: ["俯卧撑（膝版10×2）","后摆臂（20）","手臂画圈（前后20）","猫式伸展（30s）"],
      3: ["下犬式（30s）","战士一式（30s×2）","坐姿前屈（30s）","冥想呼吸（5分钟）"],
      4: ["跳舞/散步/骑车，随心动一动 🐾"],
      5: ["站立前屈（30s）","蝴蝶式（30s）","仰卧扭转（30s×2）","冥想呼吸（5分钟）"],
      6: ["深蹲（15×2）","臀桥（20×2）","静态弓步（30s×2）","猫式伸展（30s）"]
    };
    function 填充训练卡片() {
      const 容 = document.getElementById("训练内容");
      const idx = (new Date().getDay() + 6) % 7;
      容.innerHTML = "";
      for (let i=0; i<7; i++) {
        const c = document.createElement("div");
        c.className = "card" + (i===idx ? " 今日卡片" : "");
        const t = document.createElement("div");
        t.className = "day-title";
        t.textContent = 星期[i];
        c.appendChild(t);
        const ul = document.createElement("ul");
        动作计划[i].forEach(txt => {
          const li = document.createElement("li");
          li.textContent = txt;
          ul.appendChild(li);
        });
        c.appendChild(ul);
        容.appendChild(c);
      }
    }

    // ———— 一周营养建议 ————
    const 碳日序 = ["高碳","低碳","中碳","高碳","低碳","中碳","灵活"];
    const 营养配置 = {
      高碳: {
        早餐: txt=>"鸡蛋 2颗",
        午餐: 有土豆=> 有土豆 ? "米饭150g+土豆50g+鸡胸120g" : "米饭150g+鸡胸120g",
        晚餐: 有土豆=> 有土豆 ? "米饭100g+土豆50g+蛋白粉25g" : "米饭100g+蛋白粉25g"
      },
      中碳: {
        早餐: txt=>"鸡蛋 1颗",
        午餐: 有土豆=> 有土豆 ? "米饭100g+土豆50g+鸡胸100g" : "米饭100g+鸡胸100g",
        晚餐: 有土豆=> 有土豆 ? "米饭80g+土豆50g+蛋白粉25g" : "米饭80g+蛋白粉25g"
      },
      低碳: {
        早餐: txt=>"鸡蛋 1颗",
        午餐: 有土豆=> 有土豆 ? "米饭80g+土豆50g+鸡胸100g" : "米饭80g+鸡胸100g",
        晚餐: 有土豆=> 有土豆 ? "米饭60g+土豆50g+蛋白粉30g" : "米饭60g+蛋白粉30g"
      },
      灵活: {
        早餐: txt=>"鸡蛋 1~2颗",
        午餐: 有土豆=> 有土豆 ? "米饭100g+土豆50g+鸡胸120g" : "米饭100g+鸡胸120g",
        晚餐: 有土豆=> 有土豆 ? "米饭80g+土豆50g+蛋白粉25g" : "米饭80g+蛋白粉25g"
      }
    };

    function 生成周营养建议() {
      const 容 = document.getElementById("周营养建议");
      容.innerHTML = "";
      const hasPotato = document.getElementById("有土豆开关").checked;

      for (let i = 0; i < 7; i++) {
        const dayType = 碳日序[i];
        const card = document.createElement("div");
        card.className = "nutri-card";

        const title = document.createElement("div");
        title.className = "day-title";
        title.textContent = `${星期[i]} — ${dayType}日`;
        card.appendChild(title);

        const ul = document.createElement("ul");
        const cfg = 营养配置[dayType];
        Object.entries(cfg).forEach(([meal, fn]) => {
          const txt = fn(hasPotato);
          const li = document.createElement("li");
          li.textContent = `${meal}：${txt}`;
          ul.appendChild(li);
        });
        card.appendChild(ul);
        容.appendChild(card);
      }
    }

    // ———— 页面初始化 ————
    function 初始化() {
      const rec = JSON.parse(localStorage.getItem("打卡记录")) || [];
      更新打卡表(rec);
      填充训练卡片();
      const today = new Date().toISOString().slice(0,10);
      if (rec.some(i=>i.日期===today)) {
        document.getElementById("打卡状态").textContent = "今天已经打卡喵！ 🎉";
      }
      生成周营养建议();
      document.getElementById("有土豆开关")
              .addEventListener("change", 生成周营养建议);
    }
    window.onload = 初始化;
  </script>
</body>
</html>
